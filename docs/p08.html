<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Portfolio 8</title>

<script src="site_libs/header-attrs-2.19/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Portfolio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="p01.html">Portfolio 1</a>
</li>
<li>
  <a href="p02.html">Portfolio 2</a>
</li>
<li>
  <a href="p03.html">Portfolio 3</a>
</li>
<li>
  <a href="p04.html">Portfolio 4</a>
</li>
<li>
  <a href="p05.html">Portfolio 5</a>
</li>
<li>
  <a href="p06.html">Portfolio 6</a>
</li>
<li>
  <a href="p07.html">Portfolio 7</a>
</li>
<li>
  <a href="p08.html">Portfolio 8</a>
</li>
<li>
  <a href="p09.html">Portfolio 9</a>
</li>
<li>
  <a href="p10.html">Portfolio 10</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Portfolio 8</h1>

</div>


<blockquote>
<p>The goal of this project is to figure out if there is anything apart
from the composition of our test diets that might be influencing the
amount the rats consume during testing sessions for my thesis. Namely,
there are two things I’m thinking of that may be factoring in:</p>
<blockquote>
<p>1.) Food temperature. Because we only have a limited number of test
chambers, we have to run the rats in two separate waves. We store the
food in a refrigerator overnight, but it often makes more sense
logistically to leave it out while the first group is running in order
to make the switch off between groups of rats easier/faster. This also,
however, allows the food to warm up to room temperature during the time
the that the first group of rats is running, which might cause the food
to taste differently for the second group.</p>
</blockquote>
<blockquote>
<p>2.) Water consumption. Rats may eat more (or less) food during
sessions in which they drink more water, perhaps because hydration
status influences flavor preferences or motivation to eat</p>
</blockquote>
<p>Lucky for us, we can test both of these ideas with the data we’ve
already collected. Let’s start by loading what we need:</p>
</blockquote>
<pre class="r"><code># Packages
library(tidyverse)
library(readxl)
library(parsnip)

# Data
day_one &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 1,
                      col_names = TRUE)
day_two &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 2,
                      col_names = TRUE)
day_three &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 3,
                      col_names = TRUE)
day_four &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 4,
                      col_names = TRUE)
day_five &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 5,
                      col_names = TRUE)
day_six &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 6,
                      col_names = TRUE)
day_seven &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 7,
                      col_names = TRUE)</code></pre>
<div id="temperature" class="section level2">
<h2>Temperature</h2>
<blockquote>
<p>Now that we have our data, we need to process it. We’ve done some of
that before, in portfolio 3. Let’s add that code below:</p>
</blockquote>
<pre class="r"><code>#rename columns to something workable
columns &lt;- c(&#39;rat&#39;, &#39;zero&#39;, &#39;twenty&#39;, &#39;forty&#39;, &#39;sixty&#39;, &#39;eighty&#39;, &#39;hundred&#39;, &#39;water&#39;)

colnames(day_one) &lt;- columns
colnames(day_two) &lt;- columns
colnames(day_three) &lt;- columns
colnames(day_four) &lt;- columns
colnames(day_five) &lt;- columns
colnames(day_six) &lt;- columns
colnames(day_seven) &lt;- columns

##average the datasets together

#convert dataframes to matrices

m1 &lt;- data.matrix(day_one)
m2 &lt;- data.matrix(day_two)
m3 &lt;- data.matrix(day_three)
m4 &lt;- data.matrix(day_four)
m5 &lt;- data.matrix(day_five)
m6 &lt;- data.matrix(day_six)
m7 &lt;- data.matrix(day_seven)

#average those matrices together and turn the result back into a data frame

m_avg &lt;- (m1 + m2 + m3 + m4 + m5 + m6 + m7)/7
avg &lt;- as.data.frame(m_avg)


## mutliply each column by the appropriate value
avg_kcal &lt;- avg
avg_kcal$zero &lt;- avg_kcal$zero*9
avg_kcal$twenty &lt;- avg_kcal$twenty*8
avg_kcal$forty &lt;- avg_kcal$forty*7
avg_kcal$sixty &lt;- avg_kcal$sixty*6
avg_kcal$eighty &lt;- avg_kcal$eighty*5
avg_kcal$hundred &lt;- avg_kcal$hundred*4

#something weird happens with the rat column during the matrix conversion
#to fix this, I&#39;m just going to manually assign values for that column

rat_names &lt;- c(&quot;IC1&quot;, &quot;IC2&quot;, &quot;IC3&quot;, &quot;IC4&quot;, &quot;IC5&quot;, &quot;IC6&quot;, &quot;IC7&quot;, &quot;IC8&quot;, &quot;IC9&quot;, &quot;IC10&quot;, &quot;IC11&quot;, &quot;IC12&quot;)

avg_kcal &lt;- avg_kcal %&gt;%
  mutate(real_rat_name = rat_names) %&gt;%
  select(zero:real_rat_name)</code></pre>
<blockquote>
<p>This leaves us with a data frame containing the average values each
rat ate of each diet across the seven days of testing.</p>
</blockquote>
<blockquote>
<p>In order to test my idea about temperature, I need to divide the rats
up into two groups, with rats IC1-IC6 in the first group(because they
ran first) and rats IC7-IC12 in the second (because they ran
second):</p>
</blockquote>
<pre class="r"><code>#Creates an index column I can use in the next step
index &lt;- c(1:12)
avg_kcal &lt;- avg_kcal %&gt;%
  mutate(index = index)

#Divides rats into two groups based on index
avg_kcal &lt;- avg_kcal %&gt;%
  mutate(group = case_when(index &lt;= 6 ~ 1,
                           index &gt;= 7 ~ 2))</code></pre>
<blockquote>
<p>Now let’s add across the rows to calculate average total kilocalories
per session:</p>
</blockquote>
<pre class="r"><code>avg_kcal &lt;- avg_kcal %&gt;%
  mutate(total = zero + twenty + forty + sixty + eighty + hundred)</code></pre>
<blockquote>
<p>And the last thing we need to do is reformat:</p>
</blockquote>
<pre class="r"><code>avg_kcal_long &lt;- avg_kcal %&gt;%
  pivot_longer(cols = -c(real_rat_name, index, group),
               names_to = &quot;diet&quot;,
               values_to = &quot;kcals&quot;) %&gt;%
  select(real_rat_name, group, diet, kcals)</code></pre>
<blockquote>
<p>And now we have what we need! Before anything else, let’s visualize
the difference in average total calories consumed between the two
groups:</p>
</blockquote>
<pre class="r"><code>#calculate group means
group_means &lt;- avg_kcal_long %&gt;%
  filter(diet == &quot;total&quot;) %&gt;%
  group_by(group) %&gt;%
  summarize(mean(kcals))
colnames(group_means)[2] &lt;- &quot;kcals&quot;

group_means %&gt;%
  ggplot(aes(x = group, y = kcals, fill = as.factor(group))) +
  geom_bar(stat = &quot;identity&quot;, alpha = 0.5) +
  geom_point(data = filter(avg_kcal_long, diet == &quot;total&quot;), stat = &quot;identity&quot;) +
  scale_fill_manual(values = c(&quot;blue&quot;,  &quot;red&quot;))</code></pre>
<p><img src="p08_files/figure-html/group-viz-1.png" width="672" /></p>
<blockquote>
<p>So just based on the visual, it looks like we do have a descriptive
difference between the groups, with the rats in group two eating more
than those in group 1. Let’s test this difference for significance:</p>
</blockquote>
<pre class="r"><code>avg_totals &lt;- avg_kcal %&gt;%
  select(real_rat_name, group, total)

t.test(total ~ group, avg_totals, alternative = &quot;two.sided&quot;)</code></pre>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  total by group
## t = -2.3469, df = 9.1804, p-value = 0.043
## alternative hypothesis: true difference in means between group 1 and group 2 is not equal to 0
## 95 percent confidence interval:
##  -22.327657  -0.443772
## sample estimates:
## mean in group 1 mean in group 2 
##        33.59167        44.97738</code></pre>
<blockquote>
<p>And our difference is significant. It looks like the rats prefer
their food a little bit warmer (or something else about the second
session) after all. It may also be that rats in the second group are
heavier and therefore eat more as well, but without data on their
weights I can easily put my hands on right now (downside of keeping
paper records), I’m not able to test that idea here.</p>
</blockquote>
</div>
<div id="water" class="section level2">
<h2>Water</h2>
<blockquote>
<p>Next I want to see if water intake was related to average consumption
at all. That should be easy enough to do here!</p>
</blockquote>
<blockquote>
<p>I want to take advantage of the fact that we have multiple days worth
of data and plot each day as a data point rather than just use averages.
That means we’ll have. to do a bit more data wrangling, but it should be
straightforward enough.</p>
</blockquote>
<blockquote>
<p>First, let’s add a variable to the data frame for each day that just
gives the day number:</p>
</blockquote>
<pre class="r"><code>day_one &lt;- day_one %&gt;%
  mutate(day = 1)
day_two &lt;- day_two %&gt;%
  mutate(day = 2)
day_three &lt;- day_three %&gt;%
  mutate(day = 3)
day_four &lt;- day_four %&gt;%
  mutate(day = 4)
day_five &lt;- day_five %&gt;%
  mutate(day = 5)
day_six &lt;- day_six %&gt;%
  mutate(day = 6)
day_seven &lt;- day_seven %&gt;%
  mutate(day = 7)</code></pre>
<blockquote>
<p>Now let’s concatenate the data frames:</p>
</blockquote>
<pre class="r"><code>days &lt;- list(day_one, day_two, day_three, day_four, day_five, day_six, day_seven)
all_days &lt;- do.call(&quot;rbind&quot;, days)

all_days_kcal &lt;- all_days
all_days_kcal$zero &lt;- all_days_kcal$zero*9
all_days_kcal$twenty &lt;- all_days_kcal$twenty*8
all_days_kcal$forty &lt;- all_days_kcal$forty*7
all_days_kcal$sixty &lt;- all_days_kcal$sixty*6
all_days_kcal$eighty &lt;- all_days_kcal$eighty*5
all_days_kcal$hundred &lt;- all_days_kcal$hundred*4</code></pre>
<blockquote>
<p>Again lets add across the rows, group our rats, and select the
columns we need</p>
</blockquote>
<pre class="r"><code>all_days_kcal_post &lt;- all_days_kcal %&gt;%
  mutate(total = zero + twenty + forty + sixty + eighty + hundred) %&gt;%
  mutate(group = case_when(rat == &quot;IC1&quot;~1,
                           rat == &quot;IC2&quot;~1,
                           rat == &quot;IC3&quot;~1,
                           rat == &quot;IC4&quot;~1,
                           rat ==&quot;IC5&quot;~1,
                           rat == &quot;IC6&quot;~1,
                           rat == &quot;IC7&quot;~2,
                           rat == &quot;IC8&quot;~2,
                           rat == &quot;IC9&quot;~2,
                           rat == &quot;IC10&quot;~2,
                           rat == &quot;IC11&quot;~2,
                           rat == &quot;IC12&quot;~2)) %&gt;%
  select(rat, group, day, water, total)</code></pre>
<blockquote>
<p>And with things properly formatted, we can see how water and total
calorie intake are related:</p>
</blockquote>
<pre class="r"><code>cor(all_days_kcal_post$total, all_days_kcal_post$water, use = &quot;complete.obs&quot;)</code></pre>
<pre><code>## [1] -0.04586677</code></pre>
<pre class="r"><code>m_calorie_water &lt;- linear_reg() %&gt;%
  set_engine(&quot;lm&quot;) %&gt;%
  fit(total ~ water, data = all_days_kcal_post)
tidy(m_calorie_water)</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term        estimate std.error statistic  p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)    40.0       2.19    18.3   1.82e-30
## 2 water          -1.94      4.69    -0.413 6.81e- 1</code></pre>
<pre class="r"><code>all_days_kcal_post %&gt;%
  ggplot(aes(x = water, y = total)) +
  geom_jitter() +
  geom_smooth(method = &quot;lm&quot;)</code></pre>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 1 rows containing non-finite values (`stat_smooth()`).</code></pre>
<pre><code>## Warning: Removed 1 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="p08_files/figure-html/water-calorie-lm-1.png" width="672" /></p>
<blockquote>
<p>This gives us pretty convincing evidence that water and calorie
intake aren’t meaningfully related. The correlation between the two is
fairly low, and when we use water intake to predict calorie intake the
slope is non-significant.</p>
</blockquote>
</div>
<div id="conclusions" class="section level2">
<h2>Conclusions</h2>
<blockquote>
<ul>
<li><p>The first group of rats to go into the test chambers each day ate
significantly less during my first thesis experiment than the second
group</p></li>
<li><p>Water intake is not meaningfully related to calorie
intake</p></li>
</ul>
</blockquote>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
