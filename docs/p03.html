<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Portfolio 3</title>

<script src="site_libs/header-attrs-2.19/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Portfolio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="p01.html">Portfolio 1</a>
</li>
<li>
  <a href="p02.html">Portfolio 2</a>
</li>
<li>
  <a href="p03.html">Portfolio 3</a>
</li>
<li>
  <a href="p04.html">Portfolio 4</a>
</li>
<li>
  <a href="p05.html">Portfolio 5</a>
</li>
<li>
  <a href="p06.html">Portfolio 6</a>
</li>
<li>
  <a href="p07.html">Portfolio 7</a>
</li>
<li>
  <a href="p08.html">Portfolio 8</a>
</li>
<li>
  <a href="p09.html">Portfolio 9</a>
</li>
<li>
  <a href="p10.html">Portfolio 10</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Portfolio 3</h1>

</div>


<p>The goal of this portfolio project is simple: to figure out what each
one of rats’ favorite food is.</p>
<p>Here’s a bit more detail (feel free to skip this part). Essentially,
we want to determine what ratio of fat to sugar the rats prefer.
Scientifically, this gives us a baseline reference point to see how some
pharmacological manipulations subsequently affect preferences.
Pragmatically, this also gives the lab something to point to going
forward to say “this diet really <em>is</em> the most palatable” in
future studies on hedonic eating.</p>
<p>In order to actually test which foods the rats like best, we placed
them in chambers where they had simultaneous access to six diets. On the
far left of the chamber was pure fat – in this case, literally Crisco in
a dish. On the fat right was pure sugar – again, literally Domino brand
sugar cubes. In between those are 4 blends of sugar and fat in various
ratios. In the data, all 6 diets are labeled by their
<strong>sugar</strong> content from 0% to 100%.</p>
<p>Since the next phase of my experiments involves testing each rat with
access to their favorite diet by itself, I need to figure out what that
diet was for each rat. Hence, this project.</p>
<p>Let’s start by loading the packages we’ll need:</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.4.0      ✔ purrr   1.0.1 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.3.0      ✔ stringr 1.5.0 
## ✔ readr   2.1.3      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(readxl)
library(ggpubr)</code></pre>
<p>And the data:</p>
<pre class="r"><code>day_one &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 1,
                      col_names = TRUE)
day_two &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 2,
                      col_names = TRUE)
day_three &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 3,
                      col_names = TRUE)
day_four &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 4,
                      col_names = TRUE)
day_five &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 5,
                      col_names = TRUE)
day_six &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 6,
                      col_names = TRUE)
day_seven &lt;- read_excel(&quot;/Users/lawilson1999/Desktop/Data Science Spring 2023/Portfolio/p03/IC Diet Choice.xlsx&quot;,
                      sheet = 7,
                      col_names = TRUE)</code></pre>
<p>Just to get a sense of what we’re dealing with, let’s take a look at
the first one of these datasets:</p>
<pre class="r"><code>head(day_one)</code></pre>
<pre><code>## # A tibble: 6 × 8
##   Rat      `0`  `0.2` `0.4`  `0.6` `0.8`   `1`  Water
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 IC1   0.490  0.580  0.740 0.0800  2.07 0.440 0.0600
## 2 IC2   3.87   0.570  0.550 0.720   1.26 0.480 0.220 
## 3 IC3   0.0300 0.0900 0.190 0.0500  1.68 1.80  1.33  
## 4 IC4   1.25   0.660  0.410 0       1.12 0.580 0.560 
## 5 IC5   0.0600 0.0500 0.210 0.490   1.34 1.38  0.300 
## 6 IC6   0.220  0.180  0.330 0.150   1.07 2.63  0.320</code></pre>
<p>There are a few things we need to do before we can meaningfully
visualize this data. The first thing we need to do is average these
dataframes together and convert the values from grams to kilocalories.
This is because sugar and fat have different energy densities: fat has
9kcal per gram, while sugar only has 4. Converting to kilocalories
therefore allows us to standardize intake across diets</p>
<pre class="r"><code>##rename columns to something workable
columns &lt;- c(&#39;rat&#39;, &#39;zero&#39;, &#39;twenty&#39;, &#39;forty&#39;, &#39;sixty&#39;, &#39;eighty&#39;, &#39;hundred&#39;, &#39;water&#39;)

colnames(day_one) &lt;- columns
colnames(day_two) &lt;- columns
colnames(day_three) &lt;- columns
colnames(day_four) &lt;- columns
colnames(day_five) &lt;- columns
colnames(day_six) &lt;- columns
colnames(day_seven) &lt;- columns

##average the datasets together

#convert dataframes to matrices

m1 &lt;- data.matrix(day_one)
m2 &lt;- data.matrix(day_two)
m3 &lt;- data.matrix(day_three)
m4 &lt;- data.matrix(day_four)
m5 &lt;- data.matrix(day_five)
m6 &lt;- data.matrix(day_six)
m7 &lt;- data.matrix(day_seven)

#average those matrices together and turn the result back into a data frame

m_avg &lt;- (m1 + m2 + m3 + m4 + m5 + m6 + m7)/7
avg &lt;- as.data.frame(m_avg)


## mutliply each column by the appropriate value
avg_kcal &lt;- avg
avg_kcal$zero &lt;- avg_kcal$zero*9
avg_kcal$twenty &lt;- avg_kcal$twenty*8
avg_kcal$forty &lt;- avg_kcal$forty*7
avg_kcal$sixty &lt;- avg_kcal$sixty*6
avg_kcal$eighty &lt;- avg_kcal$eighty*5
avg_kcal$hundred &lt;- avg_kcal$hundred*4</code></pre>
<p>We’re also going to go ahead and get rid of the water column (because
water doesn’t have any calories) and we’re going to change any negative
values to zeroes.</p>
<pre class="r"><code>#get rid of water column

avg_kcal &lt;- avg_kcal %&gt;%
  select(rat:hundred)

#correct negative values to zeroes

m_avg_kcal &lt;- data.matrix(avg_kcal)
m_avg_kcal &lt;- pmax(m_avg_kcal, 0)
avg_kcal &lt;- as.data.frame(m_avg_kcal)

#something weird happens with the rat column during the matrix conversion
#to fix this, I&#39;m just going to manually assign values for that column

rat_names &lt;- c(&quot;IC1&quot;, &quot;IC2&quot;, &quot;IC3&quot;, &quot;IC4&quot;, &quot;IC5&quot;, &quot;IC6&quot;, &quot;IC7&quot;, &quot;IC8&quot;, &quot;IC9&quot;, &quot;IC10&quot;, &quot;IC11&quot;, &quot;IC12&quot;)

avg_kcal &lt;- avg_kcal %&gt;%
 select(zero:hundred) %&gt;%
  mutate(real_rat_name = rat_names)</code></pre>
<p>Now that our data is cleaned, we need to reformat it for ggplot. The
data as we have it is pretty wide, and we need it to be long to
visualize it the way we want.</p>
<pre class="r"><code>avg_kcal_long &lt;- avg_kcal %&gt;%
  pivot_longer(cols = -real_rat_name,
               names_to = &quot;diet&quot;,
               values_to = &quot;kcals&quot;)</code></pre>
<p>And now we’re ready for visualization! I’m thinking a bar graph with
<code>diet</code> on the x-axis and <code>kcals</code> on the y-axis is
the best way to go. Also, since we want to visualize intake separately
for each rat, it makes sense to facet by the <code>rat</code>
variable.</p>
<pre class="r"><code>avg_kcal_long %&gt;%
ggbarplot(x = &quot;diet&quot;,
          y = &quot;kcals&quot;,
          facet.by = &quot;real_rat_name&quot;)</code></pre>
<p><img src="p03_files/figure-html/kcal-bar-graphs-1.png" width="672" /></p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
